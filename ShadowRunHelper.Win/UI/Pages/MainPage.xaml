<Page
    x:Class="ShadowRunHelper.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:model="using:ShadowRunHelper.Model"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:Windows10FallCreatorsUpdate="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract, 5)"
    mc:Ignorable="d">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Ressourcen/ResourceDictionary_MainPage.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <Windows10FallCreatorsUpdate:AcrylicBrush x:Key="SystemControlAccentAcrylicWindowAccentMediumHighBrush_MoreOpac" BackgroundSource="HostBackdrop" TintColor="{ThemeResource SystemAccentColor}" TintOpacity="0.3" FallbackColor="{ThemeResource SystemAccentColor}" />
            <DataTemplate x:Name="Status" x:Key="Status" x:DataType="model:CharHolder">
                <Grid x:Name="MainGrid" Background="{ThemeResource SystemControlBackgroundAccentBrush}" Loaded="MainGrid_Loaded" Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid Grid.Column="1" VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="0"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Margin="0,5,0,0" Grid.Column="0" Style="{StaticResource Panel_Oben_Parts_Stack}">
                            <TextBlock Text="{x:Bind Person.Alias,Mode=OneWay}" Style="{StaticResource Panel_Oben_Text_1}"/>
                            <TextBlock Text="{x:Bind Person.Char_Typ,Mode=OneWay}" Style="{StaticResource Panel_Oben_Text_1}"/>
                        </StackPanel>
                        <Button x:Name="Infos" 
                                Grid.Column="1" Style="{StaticResource Panel_Oben_Parts_Btn}">
                            <StackPanel Orientation="Horizontal">
                                <StackPanel Orientation="Vertical">
                                    <TextBlock x:Uid="Model_Person_Kontostand" Style="{StaticResource Panel_Oben_Text_1}"/>
                                    <TextBlock Text="{x:Bind Person.Kontostand,Mode=OneWay, Converter={StaticResource io_ZahlenYen}}" Style="{StaticResource Panel_Oben_Text_2}"/>
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock x:Uid="Model_Person_Initiative_Kurz" Style="{StaticResource Panel_Oben_Text_1}"/>
                                    <TextBlock Text="{x:Bind Person.Initiative,Mode=OneWay}" Style="{StaticResource Panel_Oben_Text_2}"/>
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock x:Uid="Model_Person_Edge" Style="{StaticResource Panel_Oben_Text_1}"/>
                                    <TextBlock Style="{StaticResource Panel_Oben_Text_2}">
                                <Run Text="{x:Bind Person.Edge_Aktuell,Mode=OneWay}"/>
                                <Run x:Uid="Slash"/>
                                <Run Text="{x:Bind Person.Edge_Gesamt,Mode=OneWay}"/>
                                    </TextBlock>
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock x:Uid="Model_Person_Karma" Style="{StaticResource Panel_Oben_Text_1}"/>
                                    <TextBlock Style="{StaticResource Panel_Oben_Text_2}">
                                <Run Text="{x:Bind Person.Karma_Aktuell, Mode=OneWay}"/>
                                <Run x:Uid="Slash"/>
                                <Run Text="{x:Bind Person.Karma_Gesamt, Mode=OneWay}"/>
                                    </TextBlock>
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock x:Uid="Model_Person_Runs" Style="{StaticResource Panel_Oben_Text_1}"/>
                                    <TextBlock Text="{x:Bind Person.Runs,Mode=OneWay}" Style="{StaticResource Panel_Oben_Text_1}"/>
                                </StackPanel>
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <TextBlock x:Uid="Model_Person_Kontostand" Grid.Column="0" Grid.Row="0"  />
                                        <TextBox Name="Header_Kontostand" Text="{x:Bind Person.Kontostand, Mode=TwoWay, Converter={StaticResource io_ZahlenDouble}}" Grid.Column="1" Grid.ColumnSpan="3" Grid.Row="0" Style="{StaticResource Panel_Oben_Kontostand}"  />

                                        <TextBlock x:Uid="Model_Person_InitiativeAktuell" Grid.Column="0" Grid.Row="1" Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <TextBlock Text="{x:Bind Person.Initiative,Mode=OneWay}" Grid.Column="1" Grid.Row="1" Style="{StaticResource Panel_Oben_Text_1}" />
                                        <Button Grid.Column="3" Grid.Row="1" Name="Initiative_Plus" Style="{StaticResource Panel_Oben_Btn_Plus}" Click="Plus_Click"></Button>
                                        <Button Grid.Column="2" Grid.Row="1" Name="Initiative_Minus" Style="{StaticResource Panel_Oben_Btn_Minus}" Click="Minus_Click"></Button>

                                        <TextBlock x:Uid="Model_Person_Edge_Aktuell" Grid.Column="0" Grid.Row="2" Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <TextBlock Text="{x:Bind Person.Edge_Aktuell,Mode=OneWay}" Grid.Column="1" Grid.Row="2" Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <Button Grid.Column="3" Grid.Row="2" Name="Edge_Aktuell_Plus" Style="{StaticResource Panel_Oben_Btn_Plus}" Click="Plus_Click"></Button>
                                        <Button Grid.Column="2" Grid.Row="2" Name="Edge_Aktuell_Minus" Style="{StaticResource Panel_Oben_Btn_Minus}" Click="Minus_Click"></Button>

                                        <TextBlock x:Uid="Model_Person_Edge_Gesamt" Grid.Column="0" Grid.Row="3"  Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <TextBlock Text="{x:Bind Person.Edge_Gesamt,Mode=OneWay}" Grid.Column="1" Grid.Row="3" Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <Button Grid.Column="3" Grid.Row="3" Name="Edge_Gesamt_Plus" Style="{StaticResource Panel_Oben_Btn_Plus}" Click="Plus_Click"></Button>
                                        <Button Grid.Column="2" Grid.Row="3" Name="Edge_Gesamt_Minus" Style="{StaticResource Panel_Oben_Btn_Minus}" Click="Minus_Click"></Button>

                                        <TextBlock x:Uid="Model_Person_Karma_Aktuell" Grid.Column="0" Grid.Row="4" Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <TextBlock Text="{x:Bind Person.Karma_Aktuell,Mode=OneWay}" Grid.Column="1" Grid.Row="4" Style="{StaticResource Panel_Oben_Text_1}" />
                                        <Button Grid.Column="3" Grid.Row="4" Name="Karma_Aktuell_Plus" Style="{StaticResource Panel_Oben_Btn_Plus}" Click="Plus_Click"></Button>
                                        <Button Grid.Column="2" Grid.Row="4" Name="Karma_Aktuell_Minus" Style="{StaticResource Panel_Oben_Btn_Minus}" Click="Minus_Click"></Button>

                                        <TextBlock x:Uid="Model_Person_Karma_Gesamt" Grid.Column="0" Grid.Row="5" Style="{StaticResource Panel_Oben_Text_1}" />
                                        <TextBlock Text="{x:Bind Person.Karma_Gesamt, Mode=OneWay}" Grid.Column="1" Grid.Row="5" Style="{StaticResource Panel_Oben_Text_1}" />
                                        <Button Name="Karma_Gesamt_Plus" Grid.Column="3" Grid.Row="5" Style="{StaticResource Panel_Oben_Btn_Plus}" Click="Plus_Click"></Button>
                                        <Button Name="Karma_Gesamt_Minus" Grid.Column="2" Grid.Row="5" Style="{StaticResource Panel_Oben_Btn_Minus}" Click="Minus_Click"></Button>

                                        <TextBlock x:Uid="Model_Person_Runs" Grid.Column="0" Grid.Row="6"  Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <TextBlock Text="{x:Bind Person.Runs,Mode=OneWay}" Grid.Column="1" Grid.Row="6" Style="{StaticResource Panel_Oben_Text_1}"/>
                                        <Button Grid.Column="3" Grid.Row="6" Name="Runs_Plus" Style="{StaticResource Panel_Oben_Btn_Plus}" Click="Plus_Click"></Button>
                                        <Button Grid.Column="2" Grid.Row="6" Name="Runs_Minus" Style="{StaticResource Panel_Oben_Btn_Minus}" Click="Minus_Click"></Button>

                                        <Button x:Uid="UI_Btn_Bearbeiten" Loaded="Button_Loaded" Name="Person2_Edit" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="7" Click="Edit_Click"/>
                                    </Grid>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                        <Button x:Name="Regler" Grid.Column="2" Style="{StaticResource Panel_Oben_Parts_Btn}">
                            <StackPanel Orientation="Vertical" >
                                <TextBlock x:Uid="UI_Char_Schaden" HorizontalAlignment="Center" Style="{StaticResource Panel_Oben_Text_Schaden}"/>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" >
                                    <TextBlock Text="{x:Bind Person.Schaden_G,Mode=OneWay}" Style="{StaticResource Panel_Oben_Text_Schaden}"/>
                                    <TextBlock Text="{x:Bind Person.Schaden_K,Mode=OneWay}" Style="{StaticResource Panel_Oben_Text_Schaden}"/>
                                    <TextBlock Text="{x:Bind CTRLCyberDeck.ActiveItem.dSchaden, Mode=OneWay}" Name="XAML_Header_Schaden_M_Text" Loaded="XAML_Header_Schaden_M_Text_Loaded" Style="{StaticResource Panel_Oben_Text_Schaden}"/>
                                </StackPanel>
                            </StackPanel>
                            <Button.Flyout>
                                <Flyout>
                                    <Flyout.FlyoutPresenterStyle>
                                        <Style TargetType="FlyoutPresenter">
                                            <!--<Setter Property="Background" Value="{ThemeResource SystemControlAltHighAcrylicElementBrush}" />-->
                                            <!--<Setter Property="Background" Value="Transparent" />-->
                                            <!--<Setter Property="ScrollViewer.HorizontalScrollMode" Value="Disabled"/>-->
                                            <!--<Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>-->
                                            <!--<Setter Property="IsTabStop" Value="True"/>-->
                                            <!--<Setter Property="TabNavigation" Value="Cycle"/>-->
                                        </Style>
                                    </Flyout.FlyoutPresenterStyle>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="1*"/>
                                            <ColumnDefinition Width="1*"/>
                                            <ColumnDefinition Width="1*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>
                                        <TextBlock x:Uid="UI_Char_Schaden_Geist" HorizontalAlignment="Center" Grid.Column="0" Grid.Row="1" Style="{StaticResource Panel_Oben_Text_Schaden}"/>
                                        <TextBlock x:Uid="UI_Char_Schaden_Koerper" HorizontalAlignment="Center" Grid.Column="1" Grid.Row="1" Style="{StaticResource Panel_Oben_Text_Schaden}"/>
                                        <TextBlock x:Uid="UI_Char_Schaden_Matrix" HorizontalAlignment="Center" Grid.Column="2" Grid.Row="1" Style="{StaticResource Panel_Oben_Text_Schaden}"
                                                   />
                                        <Slider HorizontalAlignment="Center" Name="XAML_Header_Schaden_G_Slider" Orientation="Vertical" Grid.Row="0" Grid.Column="0" Value="{x:Bind Path=Person.Schaden_G, Mode=TwoWay}"  Maximum="{x:Bind Person.Schaden_G_max,Mode=TwoWay}" Style="{StaticResource Panel_Oben_Schaden_Slider}"/>
                                        <Slider HorizontalAlignment="Center" Name="XAML_Header_Schaden_K_Slider" Orientation="Vertical" Grid.Row="0" Grid.Column="1" Value="{x:Bind Person.Schaden_K,Mode=TwoWay}" Maximum="{x:Bind Person.Schaden_K_max,Mode=TwoWay}" Style="{StaticResource Panel_Oben_Schaden_Slider}"/>
                                        <Slider HorizontalAlignment="Center" Name="XAML_Header_Schaden_M_Slider" Orientation="Vertical" Grid.Row="0" Grid.Column="2" Value="{x:Bind CTRLCyberDeck.ActiveItem.dSchaden,Mode=TwoWay}" Maximum="{x:Bind CTRLCyberDeck.ActiveItem.dSchadenMax,Mode=TwoWay}" Style="{StaticResource Panel_Oben_Schaden_Slider}"/>
                                    </Grid>
                                </Flyout>
                            </Button.Flyout>
                        </Button>
                        <StackPanel Grid.Column="3" Style="{StaticResource Panel_Oben_Parts_Stack}">
                            <TextBlock Name="XAML_Header_Bild" Width="40" Height="40" Margin="10,0,10,0" Text="PIC"/>
                        </StackPanel>
                    </Grid>
                </Grid>

            </DataTemplate>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Border x:Name="StatusControlBorder">
            <ContentControl HorizontalContentAlignment="Stretch" x:Name="StatusControl" ContentTemplate="{StaticResource Status}"
                            DataContext="{x:Bind Model.MainObject, Mode=OneWay}" 
                            IsEnabled="{x:Bind Model.MainObject, Converter={StaticResource o_Null2Bool}, Mode=OneWay}"
                />
        </Border>
        <Frame Grid.Row="1" Name="MyFrame"></Frame>
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Border x:Name="MainBarBorder">
                <CommandBar x:Name="MainBar1" Background="{ThemeResource SystemControlBackgroundAccentBrush}" HorizontalContentAlignment="Center" HorizontalAlignment="Center" Loaded="CommandBar_Loaded">
                    <AppBarButton x:Name="Nav_Char" Loaded="AppBarButton_Loaded" x:Uid="Ui_Nav_Char" Icon="Contact" Click="Ui_Nav_Char"/>
                    <AppBarButton x:Name="Nav_Admin" Loaded="AppBarButton_Loaded" x:Uid="Ui_Nav_Admin" Icon="People" Click="Ui_Nav_Admin"/>
                    <AppBarButton x:Name="PreDataBase" Loaded="AppBarButton_Loaded" x:Uid="Ui_DB_Nav" Icon="Library" Click="OpenDB"
                                  Visibility="{x:Bind Model.MainObject, Converter={StaticResource o_Null2Visibility}, Mode=OneWay}"/>
                    <AppBarButton x:Name="Nav_Settings" Loaded="AppBarButton_Loaded" x:Uid="Ui_Nav_Settings" Icon="Setting" Click="Ui_Nav_Settings"/>
                </CommandBar>
            </Border>
            <CommandBar x:Name="MainBar2" Background="{ThemeResource SystemControlBackgroundAccentBrush}" Grid.Column="1" HorizontalContentAlignment="Center" HorizontalAlignment="Stretch" Loaded="CommandBar_Loaded">
            </CommandBar>
        </Grid>
    </Grid>
</Page>